{"version":3,"sources":["webpack:///./src/pages/tutorial.mdx","webpack:///./.cache/gatsby-browser-entry.js","webpack:///./.cache/public-page-renderer.js","webpack:///./.cache/public-page-renderer-prod.js","webpack:///./src/components/Layout/Meta.js","webpack:///./src/components/Layout/Sidebar.js","webpack:///../src/helpers.js","webpack:///../src/FioraField.js","webpack:///../src/FioraFormMeta.js","webpack:///../src/index.js","webpack:///../src/formFactory.js","webpack:///../src/fieldFactory.js","webpack:///../src/formMetaFactory.js","webpack:///./src/components/Layout/PreComponent.js","webpack:///./src/components/Layout/Layout.js","webpack:///./src/components/Layout/index.js"],"names":["__webpack_exports__","default","_ref","components","props","_babel_runtime_helpers_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_0___default","react__WEBPACK_IMPORTED_MODULE_1___default","a","createElement","_mdx_js_tag__WEBPACK_IMPORTED_MODULE_2__","MDXTag","name","Layout","_home_xiaofan_dev_fiora_www_src_components_Layout_index_js__WEBPACK_IMPORTED_MODULE_3__","layoutProps","parentName","className","_frontmatter","__webpack_require__","r","d","graphql","StaticQueryContext","StaticQuery","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","prop_types__WEBPACK_IMPORTED_MODULE_1__","prop_types__WEBPACK_IMPORTED_MODULE_1___default","gatsby_link__WEBPACK_IMPORTED_MODULE_2__","gatsby_link__WEBPACK_IMPORTED_MODULE_2___default","withPrefix","navigate","push","replace","navigateTo","_wait_for_route_change__WEBPACK_IMPORTED_MODULE_3__","c","_public_page_renderer__WEBPACK_IMPORTED_MODULE_4__","_public_page_renderer__WEBPACK_IMPORTED_MODULE_4___default","_parse_path__WEBPACK_IMPORTED_MODULE_5__","createContext","Consumer","staticQueryData","data","query","render","children","Error","propTypes","object","string","isRequired","func","m","module","exports","_page_renderer__WEBPACK_IMPORTED_MODULE_2__","_loader__WEBPACK_IMPORTED_MODULE_3__","ProdPageRenderer","location","pageResources","getResourcesForPathname","pathname","shape","u","172","e","t","i","o","s","l","p","Meta","metadata","react_default","Helmet_default","title","meta","content","description","keywords","join","lang","prop_types_default","array","Layout_Meta","cssSidebar","Object","index_esm","cssNav","cssTitle","cssLink","activeLinkStyle","backgroundColor","Sidebar","siteTitle","gatsby_browser_entry","Link","to","activeStyle","Layout_Sidebar","E","T","x","F","V","k","S","M","j","D","N","X","helpers_getFormValues","fields","keys","reduce","reduced","fieldName","_objectSpread2","objectSpread_default","value","getFieldValue","state","helpers_getInitialValues","initialValues","_objectSpread3","FioraField_FioraField","isValidating","updateValue","newValue","_this$props","_this","validator","_callee","onValidate","error","regenerator_default","wrap","_context","prev","next","setState","sent","abrupt","t0","catch","stop","this","apply","arguments","validate","_this$props2","validateField","shouldComponentUpdate","nextProps","nextState","_this2","changed","forEach","key","console","log","componentDidMount","_this$props3","registerField","_this$props4","isTouched","react","Component","defaultProps","src_FioraField","q","src_FioraFormMeta","isSubmitting","isValid","PureComponent","src","_React$createContext","Provider","Form","_React$Component","_len","length","args","Array","_key","call","concat","fieldsInfo","info","prevState","then","_updateErrors","errors","hasErrors","errorObj","partial","filter","_objectSpread4","handleSubmit","asyncToGenerator_default","mark","event","onSubmit","fieldNames","fieldErrors","formData","formErrors","submitErrors","hasSubmitErrors","preventDefault","some","Promise","all","map","index","_objectSpread5","_x","handleReset","onReset","inheritsLoose_default","_proto","prototype","rest","objectWithoutPropertiesLoose_default","assign","Field","_ref2","FormMeta","cssLive","cssEditor","cssPreview","PreComponent_PreComponent","instance","showInteractive","endsWith","react_live_es","code","scope","mountStylesheet","contentEditable","b","node","Layout_PreComponent","_","cssLayout","cssMain","cssMainSection","_2913518534","site","Fragment","siteMetadata","dist","MDXProvider","pre","Layout_Layout","B"],"mappings":"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","file":"component---src-pages-tutorial-mdx-a208c49f158d075e3faf.js","sourcesContent":["import React from 'react'\nimport { MDXTag } from '@mdx-js/tag'\n\n\nimport DefaultLayout from \"/home/xiaofan/dev/fiora/www/src/components/Layout/index.js\"\n\nexport default ({components, ...props}) => <MDXTag name=\"wrapper\" Layout={DefaultLayout} layoutProps={props} components={components}>\n\n<MDXTag name=\"h2\" components={components}>{`Tutorial`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`This tutorial will demonstrate how to build a simple user registration form with Fiora.`}</MDXTag>\n<MDXTag name=\"h4\" components={components}>{`Create a form`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`First thing we will need to do is to import the factory function and create an instance of the fiora form.`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-js-static\"}}>{`import createFiora from 'fiora';\n\nconst { Form, Field } = createFiora();\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}><MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`Form`}</MDXTag>{` and `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`Field`}</MDXTag>{` are the two essential components we need to start building.`}</MDXTag>\n<MDXTag name=\"h4\" components={components}>{`Add a username field`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`Now lets add a username field, by simply using the Field component with a render function.`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-jsx\"}}>{`<Form>\n  <Field name=\"username\">\n    {({ value, updateValue }) =>\n      <>\n        <label>Username: </label>\n        <input\n          type=\"text\"\n          value={value}\n          onChange={({ target: { value } }) => {\n            updateValue(value); // updates the value\n          }}\n        />\n      </>\n    }\n  </Field>\n</Form>\n`}</MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`To render a simplest field, you will want to use `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`value`}</MDXTag>{` together with `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`updateValue`}</MDXTag>{`.`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`The `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`updateValue`}</MDXTag>{` function is expecting a param as the new value to update the field with.`}</MDXTag>\n<MDXTag name=\"h4\" components={components}>{`Add validation to the field`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`Now we have the username field in place, we can add some validation to it. For now let's just disallow all usernames with length less than 5 characters, and we can specifify that we want the validation to be trigger whenever the value is changed.`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`To do this, we will just use the `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`onValidate`}</MDXTag>{` prop on the Field component, and use the `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`validate`}</MDXTag>{` render prop.`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-jsx\"}}>{`<Form>\n  <Field\n    name=\"username\"\n    onValidate={username =>\n      username.length < 5 ? 'Invalid username' : null\n    }\n  >\n    {({ value, updateValue, validate }) => (\n      <>\n        <label>Username: </label>\n        <input\n          type=\"text\"\n          value={value}\n          onChange={({ target: { value } }) => {\n            updateValue(value); // updates the value\n            validate(); // triggers the validation\n          }}\n        />\n      </>\n    )}\n  </Field>\n</Form>\n`}</MDXTag></MDXTag></MDXTag>\n\nexport const _frontmatter = {};\n\n  ","import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport Link, {\n  withPrefix,\n  navigate,\n  push,\n  replace,\n  navigateTo,\n} from \"gatsby-link\"\nimport { waitForRouteChange } from \"./wait-for-route-change\"\nimport PageRenderer from \"./public-page-renderer\"\nimport parsePath from \"./parse-path\"\n\nconst StaticQueryContext = React.createContext({})\n\nconst StaticQuery = props => (\n  <StaticQueryContext.Consumer>\n    {staticQueryData => {\n      if (\n        props.data ||\n        (staticQueryData[props.query] && staticQueryData[props.query].data)\n      ) {\n        return (props.render || props.children)(\n          props.data ? props.data.data : staticQueryData[props.query].data\n        )\n      } else {\n        return <div>Loading (StaticQuery)</div>\n      }\n    }}\n  </StaticQueryContext.Consumer>\n)\n\nStaticQuery.propTypes = {\n  data: PropTypes.object,\n  query: PropTypes.string.isRequired,\n  render: PropTypes.func,\n  children: PropTypes.func,\n}\n\nfunction graphql() {\n  throw new Error(\n    `It appears like Gatsby is misconfigured. Gatsby related \\`graphql\\` calls ` +\n      `are supposed to only be evaluated at compile time, and then compiled away,. ` +\n      `Unfortunately, something went wrong and the query was left in the compiled code.\\n\\n.` +\n      `Unless your site has a complex or custom babel/Gatsby configuration this is likely a bug in Gatsby.`\n  )\n}\n\nexport {\n  Link,\n  withPrefix,\n  graphql,\n  parsePath,\n  navigate,\n  push, // TODO replace for v3\n  replace, // TODO remove replace for v3\n  navigateTo, // TODO: remove navigateTo for v3\n  StaticQueryContext,\n  StaticQuery,\n  PageRenderer,\n  waitForRouteChange,\n}\n","const preferDefault = m => (m && m.default) || m\n\nif (process.env.BUILD_STAGE === `develop`) {\n  module.exports = preferDefault(require(`./public-page-renderer-dev`))\n} else if (process.env.BUILD_STAGE === `build-javascript`) {\n  module.exports = preferDefault(require(`./public-page-renderer-prod`))\n} else {\n  module.exports = () => null\n}\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\n\nimport InternalPageRenderer from \"./page-renderer\"\nimport loader from \"./loader\"\n\nconst ProdPageRenderer = ({ location }) => {\n  const pageResources = loader.getResourcesForPathname(location.pathname)\n  return React.createElement(InternalPageRenderer, {\n    location,\n    pageResources,\n  })\n}\n\nProdPageRenderer.propTypes = {\n  location: PropTypes.shape({\n    pathname: PropTypes.string.isRequired,\n  }).isRequired,\n}\n\nexport default ProdPageRenderer\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Helmet from 'react-helmet';\n\nfunction Meta({ metadata }) {\n  return (\n    <Helmet\n      title={metadata.title}\n      meta={[\n        { name: 'description', content: metadata.description },\n        {\n          name: 'keywords',\n          content: metadata.keywords.join(', '),\n        },\n      ]}\n    >\n      <html lang=\"en\" />\n    </Helmet>\n  );\n}\n\nMeta.propTypes = {\n  metadata: PropTypes.shape({\n    title: PropTypes.string.isRequired,\n    description: PropTypes.string.isRequired,\n    keywords: PropTypes.array.isRequired,\n  }).isRequired,\n};\n\nexport default Meta;\n","import React from 'react';\nimport { Link } from 'gatsby';\nimport PropTypes from 'prop-types';\nimport { css } from 'react-emotion';\n\nconst cssSidebar = css`\n  position: fixed;\n  left: 0;\n  width: 240px;\n  height: 100vh;\n  background: #f04242;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst cssNav = css`\n  flex: 1;\n`;\n\nconst cssTitle = css`\n  margin-top: 12px;\n  font-size: 54px;\n  color: #fff;\n  text-align: center;\n  cursor: default;\n`;\n\nconst cssLink = css`\n  color: #fff;\n  display: block;\n  font-size: 18px;\n  font-weight: 200;\n  padding: 4px 24px;\n  text-decoration: none;\n  &:hover {\n    background-color: rgba(255, 255, 255, 0.24);\n  }\n`;\n\nconst activeLinkStyle = {\n  backgroundColor: ' rgba(255, 255, 255, 0.24)',\n};\n\nfunction Sidebar({ siteTitle }) {\n  return (\n    <div className={cssSidebar}>\n      <div className={cssNav}>\n        <h1 className={cssTitle}>{siteTitle}</h1>\n        <Link to=\"/\" className={cssLink} activeStyle={activeLinkStyle}>\n          Get Started\n        </Link>\n        <Link to=\"/tutorial\" className={cssLink} activeStyle={activeLinkStyle}>\n          Tutorial\n        </Link>\n        <Link to=\"/api\" className={cssLink} activeStyle={activeLinkStyle}>\n          API\n        </Link>\n      </div>\n      <div>footer</div>\n    </div>\n  );\n}\n\nSidebar.propTypes = {\n  siteTitle: PropTypes.string.isRequired,\n};\n\nexport default Sidebar;\n","/* @flow */\nimport type { FormState } from './formFactory';\n\nexport const getFormValues = (fields: $PropertyType<FormState, 'fields'>) =>\n  Object.keys(fields).reduce(\n    (reduced, fieldName) => ({\n      ...reduced,\n      [fieldName]: fields[fieldName].value,\n    }),\n    {}\n  );\n\nexport const getFieldValue = (fieldName: string, state: FormState) =>\n  state.fields[fieldName] ? state.fields[fieldName].value : undefined;\n\nexport const getInitialValues = (initialValues?: PlainObject) =>\n  initialValues\n    ? Object.keys(initialValues).reduce(\n        (reduced, fieldName) => ({\n          ...reduced,\n          [fieldName]: {\n            // TODO clone\n            value: initialValues[fieldName],\n          },\n        }),\n        {}\n      )\n    : {};\n","/* @flow */\nimport * as React from 'react';\nimport type { FormState } from './formFactory';\n\ntype FioraFieldProps = FieldProps & {\n  updateValue: $PropertyType<FormState, 'updateValue'>,\n  registerField: $PropertyType<FormState, 'registerField'>,\n  validateField: $PropertyType<FormState, 'validateField'>,\n} & InternalFieldState;\n\ntype FioraFieldState = {\n  isValidating: $PropertyType<FieldRenderProps, 'isValidating'>,\n};\n\nclass FioraField extends React.Component<FioraFieldProps, FioraFieldState> {\n  /**\n   * Always default value to empty string to avoid React warning.\n   * React will warning if a input value changes from undefined to controlled.\n   */\n  static defaultProps = {\n    value: '',\n  };\n\n  state = {\n    isValidating: false,\n  };\n\n  shouldComponentUpdate(\n    nextProps: FioraFieldProps,\n    nextState: FioraFieldState\n  ) {\n    let changed = false;\n    Object.keys(nextProps).forEach(key => {\n      if (nextProps[key] !== this.props[key]) {\n        console.log(`[FioraField]: Props ${key}`);\n        changed = true;\n      }\n    });\n    Object.keys(nextState).forEach(key => {\n      if (nextState[key] !== this.state[key]) {\n        console.log(`[FioraField]: State ${key}`);\n        changed = true;\n      }\n    });\n\n    return changed;\n  }\n\n  componentDidMount() {\n    const { name, registerField } = this.props;\n\n    registerField(name, { validator: this.validator });\n  }\n\n  updateValue = (newValue: any) => {\n    const { updateValue, name } = this.props;\n\n    updateValue(name, newValue);\n  };\n\n  validator = async (value: any) => {\n    const { onValidate } = this.props;\n    if (onValidate) {\n      try {\n        this.setState({ isValidating: true });\n        const error = await onValidate(value);\n        this.setState({ isValidating: false });\n\n        return error;\n      } catch (error) {\n        // TODO handle error\n        this.setState({ isValidating: false });\n      }\n    }\n    return null;\n  };\n\n  validate = () => {\n    const { name, validateField } = this.props;\n\n    validateField(name);\n  };\n\n  render() {\n    const { children, value, error, isTouched } = this.props;\n    const { isValidating } = this.state;\n    console.log('[FioraField]: render');\n\n    return children({\n      value,\n      error,\n      isTouched: !!isTouched,\n      isValidating,\n      updateValue: this.updateValue,\n      validate: this.validate,\n    });\n  }\n}\n\nexport default FioraField;\n","/* @flow */\nimport * as React from 'react';\n\ntype FioraFormMetaProps = {\n  children: $PropertyType<FormMetaProps, 'children'>,\n  error: $PropertyType<FormMetaRenderProps, 'error'>,\n  isValidating: $PropertyType<FormMetaRenderProps, 'isValidating'>,\n  isSubmitting: $PropertyType<FormMetaRenderProps, 'isSubmitting'>,\n  isTouched: $PropertyType<FormMetaRenderProps, 'isTouched'>,\n  isValid: $PropertyType<FormMetaRenderProps, 'isValid'>,\n};\n\nclass FioraFormMeta extends React.PureComponent<FioraFormMetaProps> {\n  render() {\n    const {\n      children,\n      error,\n      isValidating,\n      isSubmitting,\n      isTouched,\n      isValid,\n    } = this.props;\n\n    return children({ error, isValidating, isSubmitting, isTouched, isValid });\n  }\n}\n\nexport default FioraFormMeta;\n","/* @flow */\nimport * as React from 'react';\nimport createForm from './formFactory';\nimport createField from './fieldFactory';\nimport createFormMeta from './formMetaFactory';\n\nconst createFiora = () => {\n  const { Provider, Consumer } = React.createContext();\n\n  return {\n    Form: createForm(Provider),\n    Field: createField(Consumer),\n    FormMeta: createFormMeta(Consumer),\n  };\n};\n\nexport default createFiora;\n","/* @flow */\nimport * as React from 'react';\nimport { getFormValues, getFieldValue, getInitialValues } from './helpers';\n\nexport type FormState = {\n  error: $PropertyType<FormMetaRenderProps, 'error'>,\n  isValidating: $PropertyType<FormMetaRenderProps, 'isValidating'>,\n  isSubmitting: $PropertyType<FormMetaRenderProps, 'isSubmitting'>,\n  fields: { [string]: InternalFieldState },\n  registerField: (fieldName: string, info: {}) => void,\n  updateValue: (fieldName: string, value: any) => void,\n  validateField: (fieldName: string) => void,\n};\n\nexport default (Provider: ContextProvider) =>\n  class Form extends React.Component<FormProps, FormState> {\n    // Keep tracks of what fields are mounted in the Form.\n    // This is the source of truth for field names that belongs to the form.\n    // At the moment, only contains `validator` function.\n    fieldsInfo = {};\n\n    shouldComponentUpdate(nextProps: FormProps, nextState: FormState) {\n      Object.keys(nextProps).forEach(key => {\n        if (nextProps[key] !== this.props[key]) {\n          console.log(`[Form]: Props ${key}`);\n        }\n      });\n      Object.keys(nextState).forEach(key => {\n        if (nextState[key] !== this.state[key]) {\n          console.log(`[Form]: State ${key}`);\n        }\n      });\n      return true;\n    }\n\n    /**\n     * Register the mounted field in the Form.\n     * @param {string} fieldName The name of the field.\n     * @param {Object} info The info to replace\n     */\n    registerField = (fieldName: string, info: {}) => {\n      if (!this.fieldsInfo[fieldName]) {\n        this.fieldsInfo[fieldName] = info;\n      }\n    };\n\n    /**\n     * Update the field to the given value in the Form.\n     * @param {string} fieldName The name of the field.\n     * @param {any} value The new value for the field.\n     */\n    updateValue = (fieldName: string, value: any) => {\n      this.setState(\n        prevState =>\n          !prevState.fields[fieldName] ||\n          prevState.fields[fieldName].value !== value\n            ? {\n                fields: {\n                  ...prevState.fields,\n                  [fieldName]: {\n                    ...prevState.fields[fieldName],\n                    value,\n                    // Clear field error whenever value changes\n                    error: null,\n                    isTouched: true,\n                  },\n                },\n              }\n            : null\n      );\n    };\n\n    /**\n     * Validate the given field using on the validator registered.\n     *\n     * This function is here because React batches setState in event handlers.\n     * In order for validate to work in the same event handler\n     * where updateValue is called, need to use the functional setState here.\n     * @param {string} fieldName The name of the field.\n     */\n    validateField = (fieldName: string) => {\n      this.setState(prevState => {\n        // Unable to use async/await in setState function\n        // This promise always resolves\n        this.fieldsInfo[fieldName]\n          .validator(getFieldValue(fieldName, prevState))\n          .then(error => {\n            this.setState(\n              nextState =>\n                error &&\n                (!nextState.fields[fieldName] ||\n                  nextState.fields[fieldName].error !== error)\n                  ? {\n                      fields: {\n                        ...nextState.fields,\n                        [fieldName]: {\n                          ...nextState.fields[fieldName],\n                          error,\n                          isTouched: true,\n                        },\n                      },\n                    }\n                  : null\n            );\n          });\n\n        // No immediate state change when validation is triggered\n        return null;\n      });\n    };\n\n    /**\n     * A helper function to update errors to the state.\n     * Any falsy value of the error will be ignored.\n     * @param {Object} errors An object with key being the field name and value being the error.\n     * @returns {boolean} Representing if there were any error set in the state.\n     */\n    _updateErrors = (errors: ErrorObject) => {\n      let hasErrors = false;\n      const errorObj = errors || {};\n\n      let partial = {\n        fields: this.state.fields,\n        isSubmitting: false,\n        isValidating: false,\n      };\n\n      Object.keys(errorObj)\n        .filter(name => !!errorObj[name])\n        .forEach(name => {\n          if (name === 'form' && this.state.error !== errorObj[name]) {\n            hasErrors = true;\n            partial = {\n              ...partial,\n              error: errorObj[name],\n            };\n          }\n          if (\n            name !== 'form' &&\n            (!this.state.fields[name] ||\n              this.state.fields[name].error !== errorObj[name])\n          ) {\n            hasErrors = true;\n            partial = {\n              ...partial,\n              fields: {\n                ...partial.fields,\n                [name]: {\n                  ...this.state.fields[name],\n                  error: errorObj[name],\n                  isTouched: true,\n                },\n              },\n            };\n          }\n        });\n\n      if (hasErrors) {\n        this.setState(partial);\n      }\n\n      return hasErrors;\n    };\n\n    /**\n     * Submit the form.\n     *\n     * It will proceed to do the following in the order:\n     *    - Check if there is any error currently.\n     *    - If there is any error then terminate else continue.\n     *    - Run each field's validation.\n     *    - If there is any error then terminate else continue.\n     *    - Run the form's validation.\n     *    - If there is any error then terminate else continue.\n     *    - Run the form's submission.\n     *    - If there is any error return false else return true.\n     * @param {SyntheticEvent} event The onSubmit event of the HTML form.\n     * @returns {boolean} Representing if there were any error.\n     */\n    handleSubmit = async (event: SyntheticEvent<HTMLFormElement>) => {\n      event.preventDefault();\n      const { onSubmit, onValidate } = this.props;\n      const { fields } = this.state;\n\n      this.setState({ isSubmitting: true, isValidating: true });\n\n      // Check if there is any error currently.\n      const hasExistingErrors = Object.keys(fields).some(\n        fieldName => fields[fieldName].error\n      );\n      if (hasExistingErrors) {\n        this.setState({ isSubmitting: false, isValidating: false });\n        return false;\n      }\n\n      // Run each field's validation.\n      const fieldNames = Object.keys(this.fieldsInfo);\n      const fieldErrors = await Promise.all(\n        fieldNames.map(fieldName =>\n          this.fieldsInfo[fieldName].validator(\n            getFieldValue(fieldName, this.state)\n          )\n        )\n      );\n      const errors = fieldNames.reduce(\n        (reduced, fieldName, index) => ({\n          ...reduced,\n          [fieldName]: fieldErrors[index],\n        }),\n        {}\n      );\n      const hasFieldErrors = this._updateErrors(errors);\n      if (hasFieldErrors) return false;\n\n      // Run the form's validation.\n      const formData = getFormValues(fields);\n      if (onValidate) {\n        const formErrors = await onValidate(formData);\n        const hasFormErrors = this._updateErrors(formErrors);\n\n        if (hasFormErrors) return false;\n      } else {\n        this.setState({ isValidating: false });\n      }\n\n      // Run the form's submission.\n      const submitErrors = await onSubmit(formData);\n      const hasSubmitErrors = this._updateErrors(submitErrors);\n\n      return hasSubmitErrors;\n    };\n\n    /**\n     * Reset the form.\n     * It will clear all fields' state.\n     */\n    handleReset = () => {\n      const { initialValues, onReset } = this.props;\n\n      this.setState({\n        fields: getInitialValues(initialValues),\n      });\n\n      if (onReset) onReset();\n    };\n\n    state = {\n      error: null,\n      isValidating: false,\n      isSubmitting: false,\n      fields: getInitialValues(this.props.initialValues),\n      updateValue: this.updateValue,\n      registerField: this.registerField,\n      validateField: this.validateField,\n    };\n\n    render() {\n      const {\n        children,\n        onSubmit,\n        onReset,\n        onValidate,\n        initialValues,\n        ...rest\n      } = this.props;\n      console.log('[Form]: render');\n\n      return (\n        <Provider value={this.state}>\n          <form\n            {...rest}\n            onSubmit={this.handleSubmit}\n            onReset={this.handleReset}\n          >\n            {children}\n          </form>\n        </Provider>\n      );\n    }\n  };\n","/* @flow */\nimport * as React from 'react';\nimport FioraField from './FioraField';\n\nexport default (Consumer: ContextConsumer) => {\n  const Field = ({ name, onValidate, children }: FieldProps) => (\n    <Consumer>\n      {({ fields, registerField, updateValue, validateField }) => (\n        <FioraField\n          name={name}\n          onValidate={onValidate}\n          updateValue={updateValue}\n          registerField={registerField}\n          validateField={validateField}\n          {...fields[name]}\n        >\n          {children}\n        </FioraField>\n      )}\n    </Consumer>\n  );\n  return Field;\n};\n","/* @flow */\nimport * as React from 'react';\nimport FioraFormMeta from './FioraFormMeta';\n\nexport default (Consumer: ContextConsumer) => {\n  const FormMeta = ({ children }: FormMetaProps) => (\n    <Consumer>\n      {({ fields, error, isValidating, isSubmitting }) => (\n        <FioraFormMeta\n          error={error}\n          isValidating={isValidating}\n          isSubmitting={isSubmitting}\n          isTouched={Object.keys(fields).some(name => fields[name].isTouched)}\n          isValid={!Object.keys(fields).some(name => fields[name].error)}\n        >\n          {children}\n        </FioraFormMeta>\n      )}\n    </Consumer>\n  );\n  return FormMeta;\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { css } from 'react-emotion';\nimport { LiveProvider, LiveEditor, LiveError, LivePreview } from 'react-live';\nimport createFiora from '../../../../src';\n\nconst cssLive = css`\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 24px;\n`;\n\nconst cssEditor = css`\n  width: 480px;\n  padding: 24px;\n  position: relative;\n`;\n\nconst cssPreview = css`\n  padding: 24px;\n  width: 396px;\n  background-color: #fafafa;\n`;\n\nclass PreComponent extends React.Component {\n  instance = createFiora();\n\n  render() {\n    const { children } = this.props;\n    const showInteractive =\n      children.props.props &&\n      !children.props.props.className.endsWith('-static');\n\n    return (\n      <LiveProvider\n        code={children.props.children}\n        scope={this.instance}\n        mountStylesheet={false}\n        className={showInteractive ? cssLive : ''}\n      >\n        <LiveEditor\n          contentEditable={showInteractive}\n          className={showInteractive ? cssEditor : ''}\n        />\n        {showInteractive ? <LiveError /> : null}\n        {showInteractive ? <LivePreview className={cssPreview} /> : null}\n      </LiveProvider>\n    );\n  }\n}\n\nPreComponent.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n\nexport default PreComponent;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { StaticQuery, graphql } from 'gatsby';\nimport { css } from 'react-emotion';\nimport { MDXProvider } from '@mdx-js/tag';\n\nimport Meta from './Meta';\nimport Sidebar from './Sidebar';\nimport PreComponent from './PreComponent';\n\nconst cssLayout = css``;\n\nconst cssMain = css`\n  margin-left: 240px;\n`;\n\nconst cssMainSection = css`\n  margin: auto;\n  width: 1020px;\n  padding: 36px 72px 72px 72px;\n`;\n\nfunction Layout({ children }) {\n  return (\n    <StaticQuery\n      query={graphql`\n        query SiteMetaQuery {\n          site {\n            siteMetadata {\n              title\n              description\n              keywords\n            }\n          }\n        }\n      `}\n    >\n      {({ site }) => (\n        <>\n          <Meta metadata={site.siteMetadata} />\n          <div className={cssLayout}>\n            <Sidebar siteTitle={site.siteMetadata.title} />\n            <main className={cssMain}>\n              <MDXProvider components={{ pre: PreComponent }}>\n                <section className={cssMainSection}>{children}</section>\n              </MDXProvider>\n            </main>\n          </div>\n        </>\n      )}\n    </StaticQuery>\n  );\n}\n\nLayout.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n\nexport default Layout;\n","export { default } from './Layout';\n"],"sourceRoot":""}